<html>
  <head>
    <title>Painterro demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      html,body,#wrapper {
        height:100%;
        margin:0;
        padding:0;
        background-color: lightgray;
      }

      #conatiner {
        position: absolute;
        top: 50px;
        bottom: 50px;
        left: 20px;
        right: 20px;
      }

    </style>
  </head>
<body>

<div id="wrapper">
  <div id="conatiner">

  </div>
  <button onclick="p.show()">Show</button>
  <button onclick="saveTest()">Save</button>
</div>

<!--<script src="https://github.com/ivictbor/painterro/releases/download/0.1.7/painterro-0.1.7.min.js"></script>-->
<script src="/painterro.min.js"></script>

<script>

//  Painterro({
//    id: 'conatiner',
//    backgroundFillColor: '#eee',
//    colorScheme: {
//      main: '#faf',
//      control: '#d5d',
//      activeControl: '#572257',
//      inputBackground: '#cf99ca',
//    }
//  });

  function saveTest() {
    const u = window.p.imageSaver.asDataURL('image/png');
    console.log('saved', u.length, u);
  }  

  window.p = Painterro({
    hideByEsc: true,
    saveByEnter: true,
    // defaultTool: 'arrow',
    onChange: (e) => {console.log('onchange e', e)},
    onUndo: (e) => {console.log('onUndo e', e)},
    onRedo: (e) => {console.log('onRedo e', e)},
    id: 'conatiner',
    initText: 'Press <strong>Prn Scr</strong>, Ctrl+V to paste a screenshot',
    changeHandler: function (state) {
      console.log('Something drawed: ', state);
     // localStorage.setItem('painterroImage', this.imageSaver.asDataURL())
    },
    // language: 'ja',
    availableLineWidths: [1,2,4,8,16,64],
    availableEraserWidths: [1,2,4,8,16,64],
    availableFontSizes: [1,2,4,8,16,64],
    availableArrowLengths: [10,20,30,40,50,60],
    // how_to_paste_actions: ['replace_all'],
    saveHandler: (saver) => {
      console.log('saving', saver.getWidth(), saver.getHeight())
    }
    //toolbarPosition: 'top',
    // fixMobilePageReloader: false,
    // defaultTool: 'line',
    //hiddenTools: ['line']
  }).show() //;
  const ctx = window.p.ctx;

  console.log(ctx);
  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.lineTo(300,150);
  ctx.strokeStyle="#FF0000";
  ctx.stroke();
    

  

</script>
</body>
</html>
